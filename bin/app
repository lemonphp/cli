#!/usr/bin/env php
<?php
/*
 * This file is part of `lemonphp/cli` project.
 *
 * (c) 2015-2016 LemonPHP Team
 *
 * This source file is subject to the MIT license that is bundled
 * with this source code in the file LICENSE.
 */

if (version_compare('5.5.9', PHP_VERSION, '>=')) {
    fwrite(
        STDERR, 'This version of PHPUnit requires PHP 5.5.9; using the latest version of PHP is highly recommended.' . PHP_EOL
    );

    die(1);
}

foreach (array(__DIR__ . '/../../autoload.php', __DIR__ . '/../vendor/autoload.php', __DIR__ . '/vendor/autoload.php') as $file) {
    if (file_exists($file)) {
        define('COMPOSER_AUTOLOAD_FILE', $file);

        break;
    }
}

unset($file);

if (!defined('COMPOSER_AUTOLOAD_FILE')) {
    fwrite(STDERR, 'You need to set up the project dependencies using the following commands:' . PHP_EOL .
        'wget http://getcomposer.org/composer.phar' . PHP_EOL .
        'php composer.phar install' . PHP_EOL
    );

    die(1);
}

require COMPOSER_AUTOLOAD_FILE;

$app = new \Lemon\Cli\App('CLI App', 'demo');
$app->addCommand(new \Lemon\Cli\Console\Command\GreetCommand());
$app->run();
